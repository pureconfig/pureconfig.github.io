<html><head><title>PureConfig: Sealed Families</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="com.github.pureconfig" /><meta name="description" content="A boilerplate-free library for loading configuration files" /><meta name="og:image" content="/img/poster.png" /><meta name="og:title" content="PureConfig: Sealed Families" /><meta name="og:site_name" content="PureConfig" /><meta name="og:url" content="https://pureconfig.github.io/" /><meta name="og:type" content="website" /><meta name="og:description" content="A boilerplate-free library for loading configuration files" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="PureConfig: Sealed Families" /><meta name="twitter:image" content="https://pureconfig.github.io/img/poster.png" /><meta name="twitter:description" content="A boilerplate-free library for loading configuration files" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/default.css" /><link rel="stylesheet" href="/css/style.css" /><link rel="stylesheet" href="/css/palette.css" /><link rel="stylesheet" href="/css/codemirror.css" /><link rel="stylesheet" href="/css/custom.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/" class="brand"><div class="brand-wrapper"><span>PureConfig</span></div></a></li> <li><a href="/docs/index.html" class="">Quick Start</a></li> <li><a href="/docs/built-in-supported-types.html" class="">Built-in Supported Types</a></li> <li><a href="/docs/supporting-new-types.html" class="">Supporting New Types</a> <ul class="sub_section"> <li><a href="/docs/combinators.html" class="">Combinators</a></li> <li><a href="/docs/config-cursors.html" class="">Config Cursors</a></li> <li><a href="/docs/complex-types.html" class="">Complex Types</a></li></ul></li> <li><a href="/docs/overriding-behavior-for-types.html" class="">Overriding Behavior for Types</a> <ul class="sub_section"> <li><a href="/docs/overriding-behavior-for-case-classes.html" class="">Case Classes</a></li> <li><a href="/docs/overriding-behavior-for-sealed-families.html" class=" active ">Sealed Families</a></li></ul></li> <li><a href="/docs/configurable-converters.html" class="">Configurable Converters</a></li> <li><a href="/docs/error-handling.html" class="">Error Handling</a></li> <li><a href="/docs/config-writers.html" class="">Config Writers</a></li> <li><a href="/docs/non-automatic-derivation.html" class="">Non-Automatic Derivation</a></li> <li><a href="/docs/library-integrations.html" class="">Library Integrations</a></li> <li><a href="/docs/faq.html" class="">FAQ</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/pureconfig/pureconfig"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/pureconfig/pureconfig"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('PureConfig A boilerplate-free library for loading configuration files');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('PureConfig A boilerplate-free library for loading configuration files');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="pureconfig" data-github-repo="pureconfig"><div class="content-wrapper"><section><h2 id="sealed-families">Sealed Families</h2>

<p>In order for PureConfig to disambiguate between different options of a sealed
family of case classes, it must read and write additional information in
configurations. By default it uses the additional field <code class="highlighter-rouge">type</code>, encoding the
concrete class represented in the configuration.</p>

<p>Given an <code class="highlighter-rouge">AnimalConf</code> sealed trait:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">com.typesafe.config.ConfigFactory</span>
<span class="k">import</span> <span class="nn">pureconfig._</span>
<span class="k">import</span> <span class="nn">pureconfig.generic.auto._</span>

<span class="k">sealed</span> <span class="k">trait</span> <span class="nc">AnimalConf</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">DogConf</span><span class="o">(</span><span class="n">age</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">AnimalConf</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">BirdConf</span><span class="o">(</span><span class="n">canFly</span><span class="k">:</span> <span class="kt">Boolean</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">AnimalConf</span>
</code></pre></div></div>

<p>This will load a <code class="highlighter-rouge">DogConf</code> instance:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">loadConfig</span><span class="o">[</span><span class="kt">AnimalConf</span><span class="o">](</span><span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">parseString</span><span class="o">(</span><span class="s">"{ type: dogconf, age: 4 }"</span><span class="o">))</span>
<span class="c1">// res0: pureconfig.ConfigReader.Result[AnimalConf] = Right(DogConf(4))
</span></code></pre></div></div>

<p>For sealed families, PureConfig provides a way to customize the conversion
without replacing the default <code class="highlighter-rouge">ConfigReader</code>. By putting in scope an instance
of <code class="highlighter-rouge">CoproductHint</code> for that sealed family, we can customize how the
disambiguation is made. For example, if <code class="highlighter-rouge">type</code> clashes with one of the fields
of a case class option, we can use another field.</p>

<p>First, define a <code class="highlighter-rouge">CoproductHint</code> in implicit scope:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">pureconfig.generic.FieldCoproductHint</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">animalConfHint</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">FieldCoproductHint</span><span class="o">[</span><span class="kt">AnimalConf</span><span class="o">](</span><span class="s">"kind"</span><span class="o">)</span>
</code></pre></div></div>

<p>Then load the config:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">loadConfig</span><span class="o">[</span><span class="kt">AnimalConf</span><span class="o">](</span><span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">parseString</span><span class="o">(</span><span class="s">"{ kind: dogconf, age: 4 }"</span><span class="o">))</span>
<span class="c1">// res1: pureconfig.ConfigReader.Result[AnimalConf] = Right(DogConf(4))
</span></code></pre></div></div>

<p><code class="highlighter-rouge">FieldCoproductHint</code> can also be adapted to write class names in a different
way. First, define a new <code class="highlighter-rouge">FieldCoproductHint</code> in implicit scope:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">implicit</span> <span class="k">val</span> <span class="n">animalConfHint</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">FieldCoproductHint</span><span class="o">[</span><span class="kt">AnimalConf</span><span class="o">](</span><span class="s">"type"</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">fieldValue</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span> <span class="n">name</span><span class="o">.</span><span class="n">dropRight</span><span class="o">(</span><span class="s">"Conf"</span><span class="o">.</span><span class="n">length</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Then load the config:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">loadConfig</span><span class="o">[</span><span class="kt">AnimalConf</span><span class="o">](</span><span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">parseString</span><span class="o">(</span><span class="s">"{ type: Bird, can-fly: true }"</span><span class="o">))</span>
<span class="c1">// res2: pureconfig.ConfigReader.Result[AnimalConf] = Right(BirdConf(true))
</span></code></pre></div></div>

<p>With a <code class="highlighter-rouge">CoproductHint</code> you can even opt not to use any extra field at all. If you encode enumerations using sealed
traits, you can just write the lowercase name of the class by using an <code class="highlighter-rouge">EnumCoproductHint</code>. For example, if we create
an enumeration for seasons:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">pureconfig.generic.EnumCoproductHint</span>

<span class="k">sealed</span> <span class="k">trait</span> <span class="nc">Season</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Spring</span> <span class="k">extends</span> <span class="nc">Season</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Summer</span> <span class="k">extends</span> <span class="nc">Season</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Autumn</span> <span class="k">extends</span> <span class="nc">Season</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Winter</span> <span class="k">extends</span> <span class="nc">Season</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">seasonHint</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">EnumCoproductHint</span><span class="o">[</span><span class="kt">Season</span><span class="o">]</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">MyConf</span><span class="o">(</span><span class="n">list</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Season</span><span class="o">])</span>
</code></pre></div></div>

<p>We can load seasons by specifying them by class name:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">loadConfig</span><span class="o">[</span><span class="kt">MyConf</span><span class="o">](</span><span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">parseString</span><span class="o">(</span><span class="s">"{ list: [spring, summer, autumn, winter] }"</span><span class="o">))</span>
<span class="c1">// res3: pureconfig.ConfigReader.Result[MyConf] = Right(MyConf(List(Spring, Summer, Autumn, Winter)))
</span></code></pre></div></div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script src="/js/main.js"></script></body></html>