<!DOCTYPE html><html><head><title>PureConfig: Scala 3 Derivation</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="com.github.pureconfig" /><meta name="description" content="A boilerplate-free library for loading configuration files" /><meta name="og:image" content="/v0.17.2/img/poster.png" /><meta name="image" property="og:image" content="/v0.17.2/img/poster.png" /><meta name="og:title" content="PureConfig: Scala 3 Derivation" /><meta name="title" property="og:title" content="PureConfig: Scala 3 Derivation" /><meta name="og:site_name" content="PureConfig" /><meta name="og:url" content="https://pureconfig.github.io/" /><meta name="og:type" content="website" /><meta name="og:description" content="A boilerplate-free library for loading configuration files" /><link rel="icon" type="image/png" href="/v0.17.2/img/favicon.png" /><meta name="twitter:title" content="PureConfig: Scala 3 Derivation" /><meta name="twitter:image" content="/v0.17.2/img/poster.png" /><meta name="twitter:description" content="A boilerplate-free library for loading configuration files" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/v0.17.2/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/v0.17.2/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/v0.17.2/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/v0.17.2/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/v0.17.2/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/v0.17.2/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/v0.17.2/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/v0.17.2/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/v0.17.2/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/v0.17.2/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/v0.17.2/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/v0.17.2/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/v0.17.2/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/v0.17.2/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/v0.17.2/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/v0.17.2/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/v0.17.2/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/v0.17.2/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/v0.17.2/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/v0.17.2/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/v0.17.2/highlight/styles/default.css" /><link rel="stylesheet" href="/v0.17.2/css/pattern-style.css" /><link rel="stylesheet" href="/v0.17.2/css/custom.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/v0.17.2/" class="brand"><div class="brand-wrapper"><span>PureConfig</span></div></a></li> <li><a href="/v0.17.2/docs/index.html" class="">Quick Start</a></li> <li><a href="/v0.17.2/docs/loading-a-config.html" class="">Loading a Config</a></li> <li><a href="/v0.17.2/docs/built-in-supported-types.html" class="">Built-in Supported Types</a></li> <li><a href="/v0.17.2/docs/supporting-new-types.html" class="">Supporting New Types</a> <ul class="sub-section"> <li><a href="/v0.17.2/docs/combinators.html" class="">Combinators</a></li> <li><a href="/v0.17.2/docs/config-cursors.html" class="">Config Cursors</a></li> <li><a href="/v0.17.2/docs/complex-types.html" class="">Complex Types</a></li></ul></li> <li><a href="/v0.17.2/docs/overriding-behavior-for-types.html" class="">Overriding Behavior for Types</a> <ul class="sub-section"> <li><a href="/v0.17.2/docs/overriding-behavior-for-case-classes.html" class="">Case Classes</a></li> <li><a href="/v0.17.2/docs/overriding-behavior-for-sealed-families.html" class="">Sealed Families</a></li></ul></li> <li><a href="/v0.17.2/docs/configurable-converters.html" class="">Configurable Converters</a></li> <li><a href="/v0.17.2/docs/error-handling.html" class="">Error Handling</a></li> <li><a href="/v0.17.2/docs/config-writers.html" class="">Config Writers</a></li> <li><a href="/v0.17.2/docs/non-automatic-derivation.html" class="">Non-Automatic Derivation</a></li> <li><a href="/v0.17.2/docs/scala-3-derivation.html" class=" active ">Scala 3 Derivation</a></li> <li><a href="/v0.17.2/docs/library-integrations.html" class="">Library Integrations</a></li> <li><a href="/v0.17.2/docs/faq.html" class="">FAQ</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav hidden-xs hidden-sm"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/pureconfig/pureconfig" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/pureconfig/pureconfig" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('PureConfig A boilerplate-free library for loading configuration files');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('PureConfig A boilerplate-free library for loading configuration files');"><i class="fa fa-facebook"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="pureconfig" data-github-repo="pureconfig"><div class="content-wrapper"><section><h2 id="scala-3-derivation">Scala 3 Derivation</h2>

<p>Scala 3 introduced native support for
<a href="https://dotty.epfl.ch/docs/reference/contextual/derivation.html">type class derivation</a> - a way to automatically
generate type class instances for enums, enum cases, case classes, case objects and sealed traits that only have the
aforementioned types as children. Instances are generated on demand by adding a <code class="language-plaintext highlighter-rouge">derives</code> clause on data types.</p>

<p>PureConfig has some limited support for derivation of <code class="language-plaintext highlighter-rouge">ConfigReader</code> instances. In order to enable it, the relevant
extensions must be imported:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">pureconfig._</span>
<span class="k">import</span> <span class="nn">pureconfig.generic.derivation.default._</span>
</code></pre></div></div>

<p>After that, you can derive <code class="language-plaintext highlighter-rouge">ConfigReader</code> instances for your config class using a <code class="language-plaintext highlighter-rouge">derives</code> clause:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">sealed</span> <span class="k">trait</span> <span class="nc">AnimalConf</span> <span class="n">derives</span> <span class="nc">ConfigReader</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">DogConf</span><span class="o">(</span><span class="n">age</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">AnimalConf</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">BirdConf</span><span class="o">(</span><span class="n">canFly</span><span class="k">:</span> <span class="kt">Boolean</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">AnimalConf</span>

<span class="nv">ConfigSource</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"{ type: dog-conf, age: 4 }"</span><span class="o">).</span><span class="py">load</span><span class="o">[</span><span class="kt">AnimalConf</span><span class="o">]</span>
<span class="c1">// val res0: pureconfig.ConfigReader.Result[AnimalConf] = Right(DogConf(4))</span>
</code></pre></div></div>

<p>Readers for enumerations of objects can also be derived by using <code class="language-plaintext highlighter-rouge">EnumConfigReader</code> instead:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">pureconfig.generic.derivation.EnumConfigReader</span>

<span class="n">enum</span> <span class="nc">Season</span> <span class="n">derives</span> <span class="nc">EnumConfigReader</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">Spring</span><span class="o">,</span> <span class="nc">Summer</span><span class="o">,</span> <span class="nc">Autumn</span><span class="o">,</span> <span class="nc">Winter</span>
<span class="o">}</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">MyConf</span><span class="o">(</span><span class="n">list</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Season</span><span class="o">])</span> <span class="n">derives</span> <span class="nc">ConfigReader</span>

<span class="nv">ConfigSource</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"{ list: [spring, summer, autumn, winter] }"</span><span class="o">).</span><span class="py">load</span><span class="o">[</span><span class="kt">MyConf</span><span class="o">]</span>
<span class="c1">// val res1: pureconfig.ConfigReader.Result[MyConf] = Right(MyConf(List(Spring, Summer, Autumn, Winter)))</span>
</code></pre></div></div>

<h3 id="limitations">Limitations</h3>

<p>There is currently no way to customize case class and sealed trait derivation - any <code class="language-plaintext highlighter-rouge">ProductHint</code> and <code class="language-plaintext highlighter-rouge">CoproductHint</code>
instances in scope are ignored.</p>

<p><code class="language-plaintext highlighter-rouge">ConfigWriter</code> derivation is not supported at the moment.</p>

<p>Overall, consider this to be in alpha/beta stage. This implementation is not as mature as the Shapeless or
Magnolia-based derivation libraries available in Scala 2 yet so please report any bugs that you find!</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/v0.17.2/highlight/highlight.pack.js"></script><script src="/v0.17.2/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script src="/v0.17.2/js/search.js"></script><script src="/v0.17.2/js/main.js"></script></body></html>